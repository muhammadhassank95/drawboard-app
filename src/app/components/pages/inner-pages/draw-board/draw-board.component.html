<div class="main-box flex flex-col shadow-md rounded mx-3 bg-white">
    <header class="flex p-3">
      <div class="flex grow justify-between items-center" [formGroup]="formGroup">
        <div class="flex items-center">
          <div class="flex">
            <span (click)="showInputOnClick()" *ngIf="!isEditInput && isEdit" class="text-lg font-medium"> {{ formGroup.value.title }} </span>
            <input type="text" *ngIf="isEditInput || !isEdit" nz-input formControlName="title"
              class="mb-1 rounded shadow-lg" placeholder="Name your diagram" (keyup.enter)="showInputOnClick()"/>
          </div>
          <div class="flex mx-4 content-center">
            <nz-tag
              *ngFor="let tag of diagramTags.controls; let i = index"
              [nzMode]="'closeable'"
              class="editable-tag rounded-full flex items-center "
            >
              {{ sliceTagName(tag.value) }}
            </nz-tag>
            <nz-tag *ngIf="!inputVisible" class="editable-tag plus border-none bg-none flex" nzNoAnimation (click)="showInput()">
              <em class="ph-plus text-md items-center"></em>
            </nz-tag>
            <div class="flex">

              <input
                #inputElement
                nz-input
                nzSize="small"
                *ngIf="inputVisible"
                type="text"
                [(ngModel)]="inputValue"
                [ngModelOptions]="{standalone: true}"
                style="width: 78px;"
                (blur)="handleInputConfirm()"
                (keydown.enter)="handleInputConfirm()"
              />
            </div>
          </div>
        </div>


        <div>
          <span class="rounded-full p-2 flex items-center bg-[#707070] text-white">
            <em (click)="back()" class="ph-x  cursor-pointer"></em>
          </span>
        </div>
      </div>
    </header>
    <div class="flex grow rounded bg-white mx-3 mb-3 border-2 border-gray-300">
      <div class="flex flex-col justify-between content-center border-r-2 border-gray-300 pt-4">
        <div>
          <ng-container *ngFor="let node of nodes">
            <div class="flex justify-center" draggable="true" (dragstart)="onDragStart($event)" data-node="node.name">
              <img class="flex mini-card w-44" name="{{node.name}}" src="{{node.imgPath}}" alt="node img" [id]="node.id">
            </div>
          </ng-container>
        </div>
        <div class="flex flex-col items-center w-full">
          <button
            class="rounded shadow-md mb-1 w-4/5"
            nz-button
            nzType="default"
            (click)="onSubmit()"
          >SAVE</button>
          <span class="text-[10px]">VERSION 0.001</span>
        </div>
      </div>
      <!-- <button (click)="addImage(selectedItem)">Add Image</button> -->
      <div>
        <!-- <div
          class="btn-export"
          onclick="Swal.fire({ title: 'Export',
          html: '<pre><code>'+JSON.stringify(editor.export(), null,4)+'</code></pre>'
          })"
        >
          Export
        </div> -->
        <div
          id="drawflow"
          (dragenter)="onDragEnter($event)"
          (dragleave)="onDragLeave($event)"
          (dragover)="onDragOver($event)"
          (dragend)="onDragEnd($event)"
          (drop)="onDrop($event)"
        >
          <!-- <div class="btn-clear" (click)="onClear()">Clear</div> -->
          <div class="btn-lock color-[#979797]">
            <em class="ph-share-network" nz-tooltip nzTooltipTitle="Share"></em>
            <em (click)="changeMode()" class="ml-2" [ngClass]="{'ph-lock-simple': this.locked, 'ph-lock-open': !this.locked}" nz-tooltip nzTooltipTitle="Lock"></em>
            <!-- <em (click)="toggleGrid()" [ngClass]="{'ph-grid-four': this.gridToggle, 'ph-square': !this.gridToggle}" nz-tooltip nzTooltipTitle="Toggle Grid"></em> -->
          </div>
        </div>
      </div>
    </div>
  </div>
